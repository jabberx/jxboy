<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>JXBoy by jabberx</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>JXBoy</h1>
        <h2>virtual game console emulator</h2>

        <section id="downloads">
          <a href="debug.html" class="btn" target="_blank">Run JXBoy in browser</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
<h2>
<a id="list-of-games" class="anchor" href="#list-of-games" aria-hidden="true"><span class="octicon octicon-link"></span></a>List of games</h2>

<p>mail your game with description and author name to <a href="mailto:jabberx@ymail.com">jabberx@ymail.com</a>
and it will be added here</p>

<b>sample program:</b>
_Ag0^^K}# - loop for debugging keyboard presses in first 8 display cells<br/>
explanation:<br/>
_ clear stack<br/>
A jump to A cell<br/>
g set high 4bit to 0<br/>
0 set low 4bit to 0<br/>
^ push current ram value (0) to stack<br/>
^ push current ram value (0) to stack<br/>
K jump to K cell (keyboard)<br/>
} copy content of K to the next byte (first 8 pixels byte)<br/>
# far jump to address from stack (0x0000) - to the beginning<br/>
g0 can be stripped if you are sure that A contains zero: _A^^K}#<br/> 
<br/>
<h3>
<a id="description-of-the-machine" class="anchor" href="#description-of-the-machine" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description of the machine</h3>

<p>1024 bytes RAM (first 46 bytes are system: first byte is 8-key keyboard bitmask, next 32 bytes is 16x16 display bitmask, see other system bytes description below)</p>

<p>1024 bytes stack</p>

<p>2048 bytes call stack (1024 return entries)</p>

<p>ROM size: up to 65536 bytes</p>

<p>No registers but RAM cell shortcut system is present. One RAM cell pointer.</p>

<p>Around 32KHz 8bit CPU, display update rate is around 10fps</p>

<h3>
<a id="machine-codes" class="anchor" href="#machine-codes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Machine codes</h3>

<p>Assembler currently is not available, so programming must be done in bytecode. There is 82 possible machine codes, each code is 1 byte and is printable character.</p>

<p><b>How assembler will look like (not finished yet):</b></p>
<iframe width="100%" height="300" src="https://jsfiddle.net/gbc5gwne/6/embedded/result/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<pre><code>w.^y"',_x$&lt;&gt;[]z=+-*/|&amp;~%?!:#`@;{}()0123456789abcdefghijklmnopqrstuv\IDLRABCJKFMNOG
</code></pre>

<p>This includes operations with stack (^y"',_x), simple 8-bit arithmetic (+-/*),</p>

<p>logical operators (&amp;|~%) (% is xor here), copy/swap commands ({}()), far/short calls (@`),</p>

<p>far/short jumps (#:), return using call stack (;), conditional z/nz jumps (?!),</p>

<p>ram pointer movement (&lt;&gt;[]=) and setting values of ram cells ($\0123456789abcdefghijklmnopqrstuv).</p>

<p>ram pointer shortcut system (ABCJK NOG F NOG M)</p>

<h1>
<a id="detailed-description" class="anchor" href="#detailed-description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Detailed description:</h1>

<p><code>w do nothing</code></p>

<p><code>. stop program</code></p>

<p><code>^ push value from current RAM cell to a stack</code></p>

<p><code>y pop value from stack to a current RAM cell</code></p>

<p><code>" duplicate value on stack</code></p>

<p><code>' drop value from stack</code></p>

<p><code>, swap two last stack values</code></p>

<p><code>_ clear stack</code></p>

<p><code>x reverse stack</code></p>

<p><code>&lt; move RAM pointer left</code></p>

<p><code>&gt; move RAM pointer right</code></p>

<p><code>[ decrease RAM pointer step /=2</code></p>

<p><code>] increase RAM pointer step *=2</code></p>

<p><code>z reset RAM pointer step to 1</code></p>

<p><code>= set RAM pointer to 2-byte address from stack (high byte is on top of stack:low byte is next)</code></p>

<p><code>+ add to the current RAM cell value value of right RAM cell, crop to 8bit, set O (overflow cell) to 1 if overflow, to 0 if not</code></p>

<p><code>- substract right RAM cell value from current RAM cell value, wrap and set N to 1 or 0 (1 if negative)</code></p>

<p><code>* multiply with right cell, result in current cell, high byte to O (overflow) cell</code></p>

<p><code>/ div to right, quotient after dot (multiplied by 100) will go to G cell</code></p>

<p><code>| or with right cell value</code></p>

<p><code>&amp; and with right cell value</code></p>

<p><code>~ not current cell value</code></p>

<p><code>% xor with right cell value</code></p>

<p><code>? short jump if zero to a relative 1-byte offset in a stack (value - 127)</code></p>

<p><code>! short jump if not zero to a relative 1-byte offset in a stack (value - 127)</code></p>

<p><code>: non-conditional short jump</code></p>

<p><code># far jump (two bytes from stack is address (high byte is on top of stack:low byte is next))</code></p>

<p>`<code>short call</code></p>

<p><code>@ far call (address: high byte is on top of stack:low byte is next)</code></p>

<p><code>; return from last call (be aware of call stack depth)</code></p>

<p><code>{ copy current cell to left cell</code></p>

<p><code>} copy current cell to right cell</code></p>

<p><code>( swap with left cell</code></p>

<p><code>) swap with right cell</code></p>

<p><code>Setting ram cell value is done with two or one byte,</code></p>

<p><code>for example g0 on some cell will make it 0b00000000,</code></p>

<p><code>i on same cell after that will turn it into 0b00100000</code></p>

<p><code>g = 0000.... | ....0000 = 0</code></p>

<p><code>h = 0001.... | ....0001 = 1</code></p>

<p><code>i = 0010.... | ....0010 = 2</code></p>

<p><code>j = 0011.... | ....0011 = 3</code></p>

<p><code>k = 0100.... | ....0100 = 4</code></p>

<p><code>l = 0101.... | ....0101 = 5</code></p>

<p><code>m = 0110.... | ....0110 = 6</code></p>

<p><code>n = 0111.... | ....0111 = 7</code></p>

<p><code>o = 1000.... | ....1000 = 8</code></p>

<p><code>p = 1001.... | ....1001 = 9</code></p>

<p><code>q = 1010.... | ....1010 = a</code></p>

<p><code>r = 1011.... | ....1011 = b</code></p>

<p><code>s = 1100.... | ....1100 = c</code></p>

<p><code>t = 1101.... | ....1101 = d</code></p>

<p><code>u = 1110.... | ....1110 = e</code></p>

<p><code>v = 1111.... | ....1111 = f</code></p>

<p><code>\ push program pointer address to a stack (low then high)</code></p>

<p><code>$ push data pointer address to a stack  (low then high)</code></p>

<p><code>I increase current cell value by 1, set O flag accordingly</code></p>

<p><code>D decrease current cell value by 1, set N flag accordingly</code></p>

<p><code>L left shift (1), O will be set to 0 or 1 (if overflow)</code></p>

<p><code>R right shift (1)</code></p>

<p><b>Memory pointer shortcuts:</b></p>
<p><code>N jump to negative flag cell, remember current RAM pointer address</code></p>
<p><code>O jump to overflow cell, remember current RAM pointer address</code></p>
<p><code>G jump to fractional division result cell, remember current RAM pointer address</code></p>
<p><code>A jump to A shortcut cell, remember current RAM pointer address</code></p>
<p><code>B jump to B shortcut cell, remember current RAM pointer address</code></p>
<p><code>C jump to C shortcut cell, remember current RAM pointer address</code></p>
<p><code>J jump to J shortcut cell, remember current RAM pointer address</code></p>
<p><code>K jump to K shortcut cell (keyboard byte), remember current RAM pointer address</code></p>
<p><code>M restore RAM pointer address</code></p>
<p><code>F jump to a first free (non-system/no shortcut) RAM byte, RAM pointer address will be lost</code></p>

<div style="clear:both;font-size:10px">
<b>RAM layout</b>:<br/>
input byte (K shortcut) (1) - video bytes (32) - neg byte (1)<br/> 
- overflow byte (1) - fractional division result byte (1)<br/>
- A shortcut (1) - empty (1) - B shortcut (1) - empty (1)<br/>
- J shortcut (1) - empty (1) - F shortcut (1) - empty(...rest of ram...)<br/>
</div>


      </section>
    </div>

    
  </body>
</html>
